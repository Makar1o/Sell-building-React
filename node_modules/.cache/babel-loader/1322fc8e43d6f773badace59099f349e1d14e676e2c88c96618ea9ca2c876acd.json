{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport data from \"../data/properties.json\";\nconst DEFAULT_FILTERS = {\n  transaction: \"\",\n  propertyType: \"\",\n  searchTerm: \"\",\n  minPrice: 0,\n  maxPrice: 100000,\n  minSize: 0,\n  maxSize: 500,\n  selectedAmenities: [],\n  sortValue: \"newest\"\n};\nexport function useFilters() {\n  _s();\n  const [properties] = useState(data);\n  const [filtered, setFiltered] = useState([]);\n  const [visibleCount, setVisibleCount] = useState(6);\n  const [filters, setFilters] = useState(DEFAULT_FILTERS);\n  useEffect(() => {\n    let result = properties.filter(p => {\n      const matchesTransaction = !filters.transaction || p.transaction === filters.transaction;\n      const matchesType = !filters.propertyType || p.type.toLowerCase() === filters.propertyType.toLowerCase();\n      const matchesSearch = !filters.searchTerm || p.title.toLowerCase().includes(filters.searchTerm.toLowerCase()) || p.location.toLowerCase().includes(filters.searchTerm.toLowerCase());\n      const matchesPrice = p.price >= filters.minPrice && p.price <= filters.maxPrice;\n      const matchesSize = p.size >= filters.minSize && p.size <= filters.maxSize;\n      const matchesAmenities = filters.selectedAmenities.length === 0 || filters.selectedAmenities.every(a => p.amenities.includes(a));\n      return matchesTransaction && matchesType && matchesSearch && matchesPrice && matchesSize && matchesAmenities;\n    });\n    switch (filters.sortValue) {\n      case \"priceLowHigh\":\n        result.sort((a, b) => a.price - b.price);\n        break;\n      case \"priceHighLow\":\n        result.sort((a, b) => b.price - a.price);\n        break;\n      case \"newest\":\n        result.sort((a, b) => new Date(b.dateAdded).getTime() - new Date(a.dateAdded).getTime());\n        break;\n      case \"popular\":\n        // Якщо немає даних по популярності, просто не сортуємо або за якоюсь логікою\n        break;\n    }\n    setFiltered(result);\n    setVisibleCount(6);\n  }, [filters, properties]);\n  return {\n    filtered: filtered.slice(0, visibleCount),\n    totalCount: filtered.length,\n    visibleCount,\n    showMore: () => setVisibleCount(c => c + 6),\n    filters,\n    setFilters,\n    resetFilters: () => setFilters(DEFAULT_FILTERS)\n  };\n}\n_s(useFilters, \"cfk1GBkD4U/31pHIfQlovxUUKmQ=\");","map":{"version":3,"names":["useState","useEffect","data","DEFAULT_FILTERS","transaction","propertyType","searchTerm","minPrice","maxPrice","minSize","maxSize","selectedAmenities","sortValue","useFilters","_s","properties","filtered","setFiltered","visibleCount","setVisibleCount","filters","setFilters","result","filter","p","matchesTransaction","matchesType","type","toLowerCase","matchesSearch","title","includes","location","matchesPrice","price","matchesSize","size","matchesAmenities","length","every","a","amenities","sort","b","Date","dateAdded","getTime","slice","totalCount","showMore","c","resetFilters"],"sources":["E:/arhive/sell-building-react/src/hooks/useFilters.ts"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport data from \"../data/properties.json\";\r\nimport { Property, Filters } from \"../types/Property\";\r\n\r\nconst DEFAULT_FILTERS: Filters = {\r\n  transaction: \"\",\r\n  propertyType: \"\",\r\n  searchTerm: \"\",\r\n  minPrice: 0,\r\n  maxPrice: 100000,\r\n  minSize: 0,\r\n  maxSize: 500,\r\n  selectedAmenities: [],\r\n  sortValue: \"newest\",\r\n};\r\n\r\nexport function useFilters() {\r\n  const [properties] = useState<Property[]>(data as Property[]);\r\n  const [filtered, setFiltered] = useState<Property[]>([]);\r\n  const [visibleCount, setVisibleCount] = useState(6);\r\n  const [filters, setFilters] = useState<Filters>(DEFAULT_FILTERS);\r\n\r\n  useEffect(() => {\r\n    let result = properties.filter((p) => {\r\n      const matchesTransaction =\r\n        !filters.transaction || p.transaction === filters.transaction;\r\n\r\n      const matchesType =\r\n        !filters.propertyType ||\r\n        p.type.toLowerCase() === filters.propertyType.toLowerCase();\r\n\r\n      const matchesSearch =\r\n        !filters.searchTerm ||\r\n        p.title.toLowerCase().includes(filters.searchTerm.toLowerCase()) ||\r\n        p.location.toLowerCase().includes(filters.searchTerm.toLowerCase());\r\n\r\n      const matchesPrice =\r\n        p.price >= filters.minPrice && p.price <= filters.maxPrice;\r\n\r\n      const matchesSize =\r\n        p.size >= filters.minSize && p.size <= filters.maxSize;\r\n\r\n      const matchesAmenities =\r\n        filters.selectedAmenities.length === 0 ||\r\n        filters.selectedAmenities.every((a) => p.amenities.includes(a));\r\n\r\n      return (\r\n        matchesTransaction &&\r\n        matchesType &&\r\n        matchesSearch &&\r\n        matchesPrice &&\r\n        matchesSize &&\r\n        matchesAmenities\r\n      );\r\n    });\r\n\r\n    switch (filters.sortValue) {\r\n      case \"priceLowHigh\":\r\n        result.sort((a, b) => a.price - b.price);\r\n        break;\r\n      case \"priceHighLow\":\r\n        result.sort((a, b) => b.price - a.price);\r\n        break;\r\n      case \"newest\":\r\n        result.sort(\r\n          (a, b) =>\r\n            new Date(b.dateAdded).getTime() - new Date(a.dateAdded).getTime()\r\n        );\r\n        break;\r\n      case \"popular\":\r\n        // Якщо немає даних по популярності, просто не сортуємо або за якоюсь логікою\r\n        break;\r\n    }\r\n\r\n    setFiltered(result);\r\n    setVisibleCount(6);\r\n  }, [filters, properties]);\r\n\r\n  return {\r\n    filtered: filtered.slice(0, visibleCount),\r\n    totalCount: filtered.length,\r\n    visibleCount,\r\n    showMore: () => setVisibleCount((c) => c + 6),\r\n    filters,\r\n    setFilters,\r\n    resetFilters: () => setFilters(DEFAULT_FILTERS),\r\n  };\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}